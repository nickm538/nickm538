<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mamdani Promise Tracker | NYC Mayor-Elect</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-gradient"></div>
    <div class="grid-overlay"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                            <path d="M20 5L35 12.5V27.5L20 35L5 27.5V12.5L20 5Z" stroke="url(#gradient1)" stroke-width="2" fill="rgba(0, 255, 255, 0.1)"/>
                            <circle cx="20" cy="20" r="8" stroke="url(#gradient1)" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                            <defs>
                                <linearGradient id="gradient1" x1="5" y1="5" x2="35" y2="35">
                                    <stop offset="0%" style="stop-color:#00ffff"/>
                                    <stop offset="100%" style="stop-color:#0080ff"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div>
                        <h1 class="logo-text">Mamdani Promise Tracker</h1>
                        <p class="logo-subtitle">NYC Mayor-Elect Accountability Dashboard</p>
                    </div>
                </div>

                <div class="status-indicator">
                    <div class="live-badge">
                        <span class="pulse-dot"></span>
                        <span id="connection-status">LIVE</span>
                    </div>
                    <div class="last-update">
                        Last Scan: <span id="last-scan-time">Initializing...</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <div class="container">
            <!-- Stats Grid -->
            <div class="stats-grid" id="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ðŸ“Š</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-total">--</div>
                        <div class="stat-label">Total Promises</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">âœ“</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-delivered">--</div>
                        <div class="stat-label">Delivered</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">ðŸ”„</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-progress">--</div>
                        <div class="stat-label">In Progress</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">ðŸ“ˆ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-likelihood">--%</div>
                        <div class="stat-label">Avg. Likelihood</div>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-section">
                <div class="filter-group">
                    <label>Category</label>
                    <select id="filter-category" class="filter-select">
                        <option value="">All Categories</option>
                        <option value="Housing">Housing</option>
                        <option value="Transportation">Transportation</option>
                        <option value="Education">Education</option>
                        <option value="Environment">Environment</option>
                        <option value="Public Safety">Public Safety</option>
                        <option value="Economic Development">Economic Development</option>
                        <option value="Healthcare">Healthcare</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Status</label>
                    <select id="filter-status" class="filter-select">
                        <option value="">All Statuses</option>
                        <option value="Not Yet In Office">Not Yet In Office</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Delivered">Delivered</option>
                        <option value="Failed">Failed</option>
                        <option value="Not Discussed">Not Discussed</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Sort By</label>
                    <select id="filter-sort" class="filter-select">
                        <option value="rank">Likelihood Rank</option>
                        <option value="likelihood">Likelihood Score</option>
                        <option value="date">Date Made</option>
                    </select>
                </div>

                <button class="btn-refresh" id="btn-refresh" onclick="triggerManualScrape()">
                    <span class="refresh-icon">â†»</span> Scan Now
                </button>
            </div>

            <!-- Promises List -->
            <div class="promises-section">
                <h2 class="section-title">
                    <span class="title-icon">ðŸŽ¯</span>
                    Campaign Promises Ranked by Likelihood
                </h2>

                <div id="promises-container" class="promises-container">
                    <!-- Promises will be loaded here -->
                    <div class="loading-state">
                        <div class="loader"></div>
                        <p>Loading promises...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification Container -->
    <div id="notifications-container" class="notifications-container"></div>

    <!-- Promise Detail Modal -->
    <div id="promise-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
